#+TITLE: 2017/08/02 会议记录

* =TODOLIST=

** =4K= 和 直播流之间的切换
*** =4K RP= 支持的验证
  =RP= 是否支持 =4K= ， 仍待验证.

  验证方式：
  1. 准备 =4K= 的直播流，因为云视只提供了 =4K= 的 =vod= ， 因此需要用 =vc= 串一路 =4K= 直播流用于测试
  2. 准备 =4K= 的 =vod= ，作为目标广告， 并挑选为广告
  3. 进行正常的RP替换， 看是否能只正常替换

*** 直播流切换

  建议不要使用 =rp= 进行直播流的替换

  晚上与 *Joanna* 商量, 决定重新做一个专门用于直播流切换的程序, 由赵明洋进行研发.

**** 一期要完成以下功能

   + 能从 =VDN= 或者其他地址拉取两路视频流
   + 能够接收用户随即请求,进行流的切换 (使用已有的 =linear= 库）
   + 将流发送到指定端口


**** 以后可扩展的功能

   + 拉取多路流
   + 多路流的切换,以及切换策略的支持


** 广告限制播放次数

  该功能计划在调整 =IVAD= 结构后实现


* =IVAD= 的结构调整

  目标降低ivad的部署难度，提高运维效率


** =ASSET= 模块

   集合现有的 =config= 和 =selector= 模块， 完成一下功能：
   + 接收来自 =ivad-manager= 的消息，完成目标广告的输入，转码，添加 =Logo= ， 注入， 审查， 查询
   + 接收来自 =rp= 的消息， 经过智能挑选，返回合适的目标广告给 =rp=


*** 与 =ivad-manager= 的交互


**** 广告添加接口

   消息来源中至少包含以下内容:
   1. =Joyplus= 接口中的广告信息
   2. =SOSP= 生成的 =CP/SP= 的信息
   3. =Logo= 的信息
   4. 转码格式信息
   5. 替换策略信息



**** 广告删除接口

  消息来源中至少包含要删除的广告信息


**** 广告更新

  消息来源中至少包含要更新的广告信息


**** 广告查询接口

   至少包含以下信息:
   1. 目前广告库中所有的广告信息


**** 审查接口

   消息来源中至少包含广告信息 和 审查是否通过


**** 修改策略接口

   消息来源中至少包含广告信息 和 目标策略


*** 与 =RP= 的交互 <<ASSET-RP>>

**** 获取目标广告接口

  消息来源中至少包含必要的源广告信息，返回经过挑选后的目标广告
  每个 =RP= 中的每路流， 都会实时进行查询


** =RP= 模块


*** 与 =iavd-manager= 的交互


**** 任务下发接口

  来源消息中至少包含以下信息：
  1. 源流来源信息
  2. =ASSET= 信息
  3. =RECOG= 信息
  4. 注入信息？


**** 任务删除接口

  来源消息中至少包含要删除的任务信息


*** 与 =ASSET= 的交互

  见  [[ASSET-RP]]



*** 与 =RECOG= 的交互 <<RP-RECOG>>

  来源消息中至少包含源广告信息、流信息


** =RECOG= 模块

*** 与 =ivad-manager= 模块的交互

  来源消息中至少包含源流信息


*** 与 =RP= 模块的交互

  见 [[RP-RECOG]]


*** LEARN 模块

  应改动以添加更详细的源广告信息 (who?)


** =IVAD-MANAGER= 模块

  待续...
